<h1 mat-dialog-title>Register New Site Visit</h1>

<form [formGroup]="this.dataService.form" (ngSubmit)="onSubmit()">
        <div mat-dialog-content class="form-group">

                <mat-form-field>
                        <input matInput placeholder="Site" formControlName = "spanid" class="form-control"  required autocomplete="off">
                        <!-- <mat-error *ngIf="spanid.invalid">{{getErrorMessage()}}</mat-error> -->
                </mat-form-field>   

                <mat-form-field >
                        <input matInput placeholder="Phone Number" formControlName = "phonenumber" class="form-control" required autocomplete="off">
                        <!-- <mat-error *ngIf="phonenumber.invalid">{{getErrorMessage()}}</mat-error> -->
                </mat-form-field>

                <mat-form-field >
                        <mat-select placeholder="Performing" formControlName = "reason" class="form-control" required>
                                <mat-option value="option">Installation </mat-option>
                                <mat-option value="option">Faulthandling </mat-option>
                                <mat-option value="option">Preventive Maintenance </mat-option>
                                <mat-option value="option">Replacement </mat-option>
                                <mat-option value="option">Upgrade </mat-option>
                                <mat-option value="option">Generating Site </mat-option>
                        </mat-select>
                        <!-- <mat-error *ngIf="reason.invalid">{{getErrorMessage()}}</mat-error> -->
                </mat-form-field>

                <mat-form-field >
                        <mat-select formControlName = "reason2" class="form-control" placeholder="Of...">
                                <mat-option value="option">2G </mat-option>
                                <mat-option value="option">3G </mat-option>
                                <mat-option value="option">4G </mat-option>
                                <mat-option value="option">Site </mat-option>
                                <mat-option value="option">External </mat-option>
                                <mat-option value="option">Transmission </mat-option>
                                <mat-option value="option">Other </mat-option>
                                <mat-option>Clear</mat-option>
                        </mat-select>   
                        <!-- <mat-error *ngIf="reason2.invalid">{{getErrorMessage()}}</mat-error> -->    
                </mat-form-field>

                <mat-form-field >
                        <input formControlName = "Reason of visit" matInput class="form-control" placeholder="Reason of visit" autocomplete="off">
                </mat-form-field>

                <mat-form-field >
                        <input formControlName = "Comments" matInput class="form-control" placeholder="comments..." autocomplete="off">
                </mat-form-field>
                
                <mat-form-field >
                        <input matInput formControlName = "Locked Equippment" class="form-control" placeholder="Ticket ID" autocomplete="off">
                </mat-form-field>

                <mat-form-field>
                        <input matInput placeholder="Locked Equippment" autocomplete="off">
   
                        <mat-tree id="tech" [dataSource]="dataSource" [treeControl]="treeControl" class="tech-tree">
                          <!-- This is the tree node template for leaf nodes -->
                          <mat-tree-node *matTreeNodeDef="let node; let i = index" matTreeNodeToggle>
                            <li class="mat-tree-node">
                              <!-- use a disabled button to provide padding for tree leaf -->
                              <mat-checkbox color = "warn" id = "inlineCheckbox{{i}} ">{{node.name}}</mat-checkbox>
                              
                            </li>
                          </mat-tree-node>
                          <!-- This is the tree node template for expandable nodes -->
                          <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
                            <li>
                              <div class="mat-tree-node">
                                <button mat-icon-button matTreeNodeToggle
                                        [attr.aria-label]="'toggle ' + node.name">
                                  <mat-icon class="mat-icon-rtl-mirror">
                                    {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                                  </mat-icon>
                                </button>
                                <mat-checkbox color = "warn" >{{node.name}}</mat-checkbox>
                              </div>
                              <ul [class.tech-tree-invisible]="!treeControl.isExpanded(node)">
                                <ng-container matTreeNodeOutlet></ng-container>
                              </ul>
                            </li>
                          </mat-nested-tree-node>
                        </mat-tree>
                </mat-form-field>

                <mat-form-field >
                        <input matInput placeholder="Ticket ID" autocomplete="off">
                </mat-form-field>

                <button class ="right" 
                        mat-button (click)="getTicket()"
                        matTooltip="Querry ITSM inventory"
                        matTooltipPosition= 'below'
                        matTooltipShowDelay= '500'>
                        <i class="material-icons">search</i>
                </button>

        </div>

        <div mat-dialog-actions>
        <button mat-button (click)="onNoClick()">Cancel</button>
        <button mat-button class="right" ng-click="insertVisit()" [mat-dialog-close] >Register</button>
        <input type="submit" class="mat-button right" value= "RegisterFire">
        </div>
</form>
