<h1>Current Site Visits</h1>
<button class = "addVisit" mat-raised-button (click)="openDialog()"><i class="material-icons"><i class="material-icons">playlist_add</i></i>Register Visit</button>

<table >
  <tr>
    <th></th>
    <th class = "small">VID</th>
    <th>Time In</th>
    <th>Time Out</th> 
    <th>SPAN ID</th>
    <th>Site Name</th>
    <th>Engineer</th>
    <th colspan="3" class = "small">Reason</th>
    <th class = "small">Comments</th>
    <th class = "small">Reference</th>
  </tr>


  <tr class = "active{{visit.active}}" *ngFor="let visit of visit">

    <td>
        <button mat-button (click)="editEntry()"><i class="material-icons small-icon">edit</i></button>
        <div *ngIf="visit.active; then thenBlock else elseBlock ">
            <!-- <ng-template #thenBlock><button mat-button (click)="toggleActive()"ng-click="state=!state"><i class="material-icons" >check_circle_outline</i></ng-template> -->
        </div>
    </td>

    <!-- <td <*ngIf="{{visit.active}} == 1; then thenBlock else elseBlock ">
        
      <ng-template #thenBlock><button mat-button (click)="toggleActive()"ng-click="state=!state"><i class="material-icons" >check_circle_outline</i></ng-template>
      <ng-template #elseBlock><button mat-button (click)="toggleActive()"ng-click="state=!state"><i class="material-icons" >replay</i></ng-template>  
    </td> -->
    
    <td class = "small">{{visit.VID}}</td>
    <td matTooltip="{{visit.checkIn}}"
        matTooltipPosition= 'before'
        matTooltipShowDelay= '500'>{{visit.timeIn}}</td>

    <td matTooltip="{{visit.checkOut}}"
        matTooltipPosition= 'after'
        matTooltipShowDelay= '500'>{{visit.timeOut}}</td> 

    <td><a routerLink ="/site/{{visit.siteID}}">{{visit.siteID}}</a></td>
    <td> {{visit.siteName}}</td>
    <td ><a routerLink ="/engineer/{{visit.Engineer}}">{{visit.engineerNumber}}</a></td>
    <td class = "small">{{visit.equipment}}</td>
    <td class = "small">{{visit.workType}}</td>
    <td class = "small">{{visit.reason}}</td>
    
    <td matTooltip="{{visit.lastModified}} on {{visit.lastModifiedTime | date:'dd LLL H:mm'}}"
    matTooltipPosition= 'before'
    matTooltipShowDelay= '500'>{{visit.lockedEquipment}}</td>
   

    <td class = "small">{{visit.INC}}</td>
  </tr>
  <tr class = "active{{visitH.active}}" *ngFor="let visitH of visitH">

      <td>
          <button mat-button (click)="editEntry()"><i class="material-icons small-icon">edit</i></button>
          <div *ngIf="visitH.active; then thenBlock else elseBlock ">
              <!-- <ng-template #thenBlock><button mat-button (click)="toggleActive()"ng-click="state=!state"><i class="material-icons" >check_circle_outline</i></ng-template> -->
          </div>
      </td>
  
      <!-- <td <*ngIf="{{visitH.active}} == 1; then thenBlock else elseBlock ">
          
        <ng-template #thenBlock><button mat-button (click)="toggleActive()"ng-click="state=!state"><i class="material-icons" >check_circle_outline</i></ng-template>
        <ng-template #elseBlock><button mat-button (click)="toggleActive()"ng-click="state=!state"><i class="material-icons" >replay</i></ng-template>  
      </td> -->
      
      <td class = "small">{{visitH.VID}}</td>
      <td matTooltip="{{visitH.checkIn}}"
          matTooltipPosition= 'before'
          matTooltipShowDelay= '500'>{{visitH.timeIn}}</td>
  
      <td matTooltip="{{visitH.checkOut}}"
          matTooltipPosition= 'after'
          matTooltipShowDelay= '500'>{{visitH.timeOut}}</td> 
  
      <td><a routerLink ="/site/{{visitH.siteID}}">{{visitH.siteID}}</a></td>
      <td> {{visitH.siteName}}</td>
      <td ><a routerLink ="/engineer/{{visitH.Engineer}}">{{visitH.engineerNumber}}</a></td>
      <td class = "small">{{visitH.equipment}}</td>
      <td class = "small">{{visitH.workType}}</td>
      <td class = "small">{{visitH.reason}}</td>
      
      <td matTooltip="{{visitH.lastModified}} on {{visitH.lastModifiedTime | date:'dd LLL H:mm'}}"
      matTooltipPosition= 'before'
      matTooltipShowDelay= '500'>{{visitH.lockedEquipment}}</td>
     
  
      <td class = "small">{{visitH.INC}}</td>
    </tr>
 
</table>

